# 使用正则表达式

在 awk 中，正则表达式通常用于模式匹配（即 `'模式 { 动作 }'` 中的 “模式”），当行或列匹配正则时，执行对应的动作。

## 匹配整行（行模式）

格式：`awk '/正则表达式/ { 动作 }' 文件名`

### 示例

匹配以 e 结尾的行:

```sh
awk '/e$/ {print}' test.txt
```

## 匹配特定列（列模式）

格式：`awk '$n ~ /正则表达式/ { 动作 }' 文件名`

含义：对第 n 列（`$n`）匹配正则（`~` 表示 “匹配”），匹配成功则执行动作。

### 示例

第 3 列（颜色）包含 r 的行:

```sh
awk -F ':' '$3 ~ /r/ {print $1, $3}' test.txt  # -F ':' 指定分隔符为冒号
```

## 反向匹配（不匹配）

用 `!` 表示 “不匹配”，即排除符合正则的行或列。

```sh
# 排除包含 e 的行
awk '!/e/ {print}' test.txt

# 第 1 列不以 g 开头的行
awk -F ':' '$1 !~ /^g/ {print $1}' test.txt
```
