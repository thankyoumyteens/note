# 除法

## 原码除法 恢复余数法

设 \[A\]<sub>原</sub> = 1.1011, \[B\]<sub>原</sub> = 1.1101, 求 \[A ÷ B\]<sub>原</sub>:

1. 先求绝对值，\[|A|\]<sub>原</sub> = 0.1011, \[|B|\]<sub>原</sub> = 0.1101，\[-|B|\]<sub>补</sub> = 1.0011

| 操作                                                                     | 余数   | 商     |
| ------------------------------------------------------------------------ | ------ | ------ |
| 把被除数当作余数                                                         | 0.1011 | -      |
| 余数 = 余数 - 除数 = 0.1011 + 1.0011 = 1.1110                            | 1.1110 | -      |
| 余数小于 0，则商 0，并把余数加上除数来恢复余数: 1.1110 + 0.1101 = 0.1011 | 0.1011 | 0      |
| 然后余数左移 1 位                                                        | 1.0110 | 0      |
| 余数 = 余数 - 除数 = 1.0110 + 1.0011 = 0.1001                            | 0.1001 | 0      |
| 余数等于 0，则商 1，也不用恢复余数                                       | 0.1001 | 0.1    |
| 然后余数左移 1 位                                                        | 1.0010 | 0.1    |
| 余数 = 余数 - 除数 = 1.0010 + 1.0011 = 0.0101                            | 0.0101 | 0.1    |
| 余数等于 0，则商 1，也不用恢复余数                                       | 0.0101 | 0.11   |
| 然后余数左移 1 位                                                        | 0.1010 | 0.11   |
| 余数 = 余数 - 除数 = 0.1010 + 1.0011 = 1.1101                            | 1.1101 | 0.11   |
| 余数小于 0，则商 0，并把余数加上除数来恢复余数: 1.1101 + 0.1101 = 0.1010 | 0.1010 | 0.110  |
| 然后余数左移 1 位                                                        | 1.0100 | 0.110  |
| 余数 = 余数 - 除数 = 1.0100 + 1.0011 = 0.0111                            | 0.0111 | 0.110  |
| 余数等于 0，则商 1，也不用恢复余数                                       | 0.0111 | 0.1101 |
| 此时商的数值位是 4 位, 计算结束, 商是 0.1101                             | 0.0111 | 0.1101 |
| 由于余数左移了 4 次, 则通过右移 4 次来还原真正的余数: 0.00000111         | 0.0111 | 0.1101 |

原理总结：我们可以把每一步中的减去除数当作过程 1，把判断余数是否需要恢复和上商作为另外一个过程 2。开始除法时，原码的计算是要求绝对值的，符号位另外处理，直接进行过程 1，先减去除数；随后进行过程 2，判断余数是否小于零，如果是，则先上商 0，恢复余数后再移位，如果余数不小于零，则上商 1，不恢复余数经行移位。移位完毕后，重复过程 1 和过程 2，直到移位次数位除数的尾数位数，最后一步还要上一次商。
