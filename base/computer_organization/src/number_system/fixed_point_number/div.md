# 除法

## 原码除法 恢复余数法

设 \[A\]<sub>原</sub> = 1.1011, \[B\]<sub>原</sub> = 1.1101, 求 \[A ÷ B\]<sub>原</sub>:

先求绝对值，\[|A|\]<sub>原</sub> = 0.1011, \[|B|\]<sub>原</sub> = 0.1101，\[-|B|\]<sub>补</sub> = 1.0011

| 操作                                                                             | 余数   | 商     |
| -------------------------------------------------------------------------------- | ------ | ------ |
| 把被除数当作余数                                                                 | 0.1011 | -      |
| 余数 = 余数 - 除数的绝对值 = 0.1011 + 1.0011 = 1.1110                            | 1.1110 | -      |
| 余数小于 0，则商 0，并把余数加上除数的绝对值来恢复余数: 1.1110 + 0.1101 = 0.1011 | 0.1011 | 0      |
| 然后余数左移 1 位                                                                | 1.0110 | 0      |
| 余数 = 余数 - 除数的绝对值 = 1.0110 + 1.0011 = 0.1001                            | 0.1001 | 0      |
| 余数等于 0，则商 1，也不用恢复余数                                               | 0.1001 | 0.1    |
| 然后余数左移 1 位                                                                | 1.0010 | 0.1    |
| 余数 = 余数 - 除数的绝对值 = 1.0010 + 1.0011 = 0.0101                            | 0.0101 | 0.1    |
| 余数等于 0，则商 1，也不用恢复余数                                               | 0.0101 | 0.11   |
| 然后余数左移 1 位                                                                | 0.1010 | 0.11   |
| 余数 = 余数 - 除数的绝对值 = 0.1010 + 1.0011 = 1.1101                            | 1.1101 | 0.11   |
| 余数小于 0，则商 0，并把余数加上除数的绝对值来恢复余数: 1.1101 + 0.1101 = 0.1010 | 0.1010 | 0.110  |
| 然后余数左移 1 位                                                                | 1.0100 | 0.110  |
| 余数 = 余数 - 除数的绝对值 = 1.0100 + 1.0011 = 0.0111                            | 0.0111 | 0.110  |
| 余数等于 0，则商 1，也不用恢复余数                                               | 0.0111 | 0.1101 |
| 此时商的数值位是 4 位, 计算结束, 商是 0.1101                                     | 0.0111 | 0.1101 |
| 由于余数左移了 4 次, 则通过右移 4 次来还原真正的余数: 0.00000111                 | 0.0111 | 0.1101 |

## 原码除法 加减交替法

设 \[A\]<sub>原</sub> = 1.1011, \[B\]<sub>原</sub> = 1.1101, 求 \[A ÷ B\]<sub>原</sub>:

先求绝对值，\[|A|\]<sub>原</sub> = 0.1011, \[|B|\]<sub>原</sub> = 0.1101，\[-|B|\]<sub>补</sub> = 1.0011

| 操作                                                                                          | 余数   | 商     |
| --------------------------------------------------------------------------------------------- | ------ | ------ |
| 把被除数当作余数                                                                              | 0.1011 | -      |
| 余数 = 余数 - 除数的绝对值 = 0.1011 + 1.0011 = 1.1110                                         | 1.1110 | -      |
| 余数小于 0，则商 0，并把余数左移 1 位, 然后加除数的绝对值: 1.1110 -> 1.1100 + 0.1101 = 0.1001 | 0.1001 | 0      |
| 余数等于 0，则商 1，并把余数左移 1 位, 然后减除数的绝对值: 0.1001 -> 1.0010 + 1.0011 = 0.0101 | 0.0101 | 0.1    |
| 余数等于 0，则商 1，并把余数左移 1 位, 然后减除数的绝对值: 0.0101 -> 0.1010 + 1.0011 = 1.1101 | 1.1101 | 0.11   |
| 余数小于 0，则商 0，并把余数左移 1 位, 然后加除数的绝对值: 1.1101 -> 1.1010 + 0.1101 = 0.0111 | 0.0111 | 0.110  |
| 余数等于 0，则商 1，此时商的数值位是 4 位, 计算结束, 商是 0.1101                              | 0.0111 | 0.1101 |

## 补码除法

1. 数据都用补码表示，符号位参与运算
2. 初始时观察被除数与除数符号，同号做减法，异号做加法
3. 若余数与除数同号，则商 1 后余数左移一位减去除数。若余数与除数异号，则商 0 后余数左移一位加上除数
4. 重复上一步操作，直到得到 n 位商(n 是被除数和除数的数值位的位数)
5. 一般在商的末尾补上一个 1

设 \[A\]<sub>补</sub> = 1.0111, \[B\]<sub>补</sub> = 0.1101, 求 \[A ÷ B\]<sub>补</sub>:

首先求出 \[-B\]<sub>补</sub> = 1.0011

| 操作                                                                                 | 余数   | 商    |
| ------------------------------------------------------------------------------------ | ------ | ----- |
| 被除数和除数异号, 做加法: 1.0111 + 0.1101 = 0.0100                                   | 0.0100 | -     |
| 余数与除数同号，则商 1, 然后余数左移一位减去除数: 0.0100 -> 0.1000 + 1.0011 = 1.1011 | 1.1011 | 1     |
| 余数与除数异号，则商 0, 然后余数左移一位加上除数: 1.1011 -> 1.0110 + 0.1101 = 0.0011 | 0.0011 | 10    |
| 余数与除数同号，则商 1, 然后余数左移一位减去除数: 0.0011 -> 0.0110 + 1.0011 = 1.1001 | 1.1001 | 101   |
| 余数与除数异号，则商 0, 此时商是 4 位, 计算结束                                      | 1.1001 | 1010  |
| 在商的末尾补上一个 1, 得到最终结果 1.0101                                            | 1.1001 | 10101 |
