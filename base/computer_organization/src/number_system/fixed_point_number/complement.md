# 补码(Two's Complement)

补码主要用于表示带符号的整数。补码可以简化硬件设计, 使得加法和减法可以使用相同的电路来实现, 同时还可以避免正零和负零的区别。

在补码中, 零表示成符号位为 0, 其余位全为 0。例如, 8 位二进制数的零表示为 00000000。而 10000000 则表示最小的负数 -2<sup>7</sup>。由于负数没有负零, 所以在补码中, 负数比正数多了一个, 所以补码的范围是 -2<sup>n</sup> ~ 2<sup>n</sup> - 1。

## 原码转补码

- 如果数是正数, 那么其补码和原码相同。例如, 00000101 的补码是 00000101
- 如果是负数:
  - 将该原码符号位不变, 数值位取反(即每个比特位, 0 变 1, 1 变 0)
  - 将取反后的结果加 1
  - 例如, 10000101 的补码是 11111011

## 补码转原码

- 如果数是正数, 那么其补码和原码相同。例如, 00000101 的原码也是 00000101
- 如果是负数:
  - 将该补码符号位不变, 数值位取反(即每个比特位, 0 变 1, 1 变 0)
  - 将取反后的结果加 1
  - 例如, 11111011 的原码是 10000101

## 把减法转换成加法

以时钟为例, 如果要把 6:00 的时间调成 3:00, 有两种方法:

1. 逆时针旋转 3 小时: 6:00 - 3:00 = 3:00
2. 顺时针旋转 9 小时: 6:00 + 9:00 = 3:00

模:当我们说 `模 n` 时, 我们指的是整数除以 n 后的余数。

在时钟的表盘上, 一共只有 12 个数字, 所以超出 12 的数字要对 12 取模: 6 + 9 = 15 mod 12 = 3。6 - 3 和 6 + 9 是等效的,而表盘上 -3 和 +9 的距离正好是 12, 如果要计算 6 - 3, 则可以用以下步骤:

1. 把 -3 对应的数字找到: 12 - |-3| = 9
2. 把算式中的 -3 替换成 9
3. 这样就减法转换成了加法: 6 + 9 = 15
4. 由于 15 超过了 12, 所以需要模 12
5. 15 mod 12 = 3

同理, 二进制数 0101 - 0001 的计算方法:

1. 由于是 4 位二进制数, 所以要对 2<sup>4</sup> = 16 = 10000 取模
2. 找到 -0001 对应的数, 那么 0001 对应的数为: 10000 - |-0001| = 1111
3. 把算式中的 -0001 替换成 +1111
4. 这样就减法转换成了加法: 0101 + 1111 = 10100
5. 由于 10100 超过了 10000, 所以需要模 10000
6. 10100 mod 10000 = 0100

把 1111 称为 -0001 的补码。
