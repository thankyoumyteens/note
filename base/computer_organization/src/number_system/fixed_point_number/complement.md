# 补码

真值是机器数所代表的实际的值, 机器数是真值在计算机中的表示。例如:

| 真值 | 真值 | 机器数 |
| ---- | ---- | ------ |
| +5   | +101 | 0101   |
| -5   | -101 | 1101   |

机器数的有符号数, 有原码、补码、反码、移码四种形式。

## 定点数

定点小数:

```
[符号][小数点][数值部分]
```

定点整数:

```
[符号][数值部分][小数点]
```

## 原码

整数:

- 正数的真值: X = +x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>
- 正数的原码: \[X\]<sub>原</sub> = 0x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>
- 负数的真值: X = -x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>
- 负数的原码: \[X\]<sub>原</sub> = 1x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>

小数:

- 正数的真值: X = +0.x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>
- 正数的原码: \[X\]<sub>原</sub> = 0.x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>
- 负数的真值: X = -0.x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>
- 负数的原码: \[X\]<sub>原</sub> = 1.x<sub>1</sub>x<sub>2</sub>x<sub>3</sub>...x<sub>n</sub>

## 把减法转换成加法

以时钟为例, 如果要把 6:00 的时间调成 3:00, 有两种方法:

1. 逆时针旋转 3 小时: 6:00 - 3:00 = 3:00
2. 顺时针旋转 9 小时: 6:00 + 9:00 = 3:00

模:当我们说 `模 n` 时，我们指的是整数除以 n 后的余数。

在时钟的表盘上, 一共只有 12 个数字, 所以超出 12 的数字要对 12 取模: 6 + 9 = 15 mod 12 = 3。6 - 3 和 6 + 9 是等效的,而表盘上 -3 和 +9 的距离正好是 12, 如果要计算 6 - 3, 则可以用以下步骤:

1. 把 -3 对应的数字找到: 12 - |-3| = 9
2. 把算式中的 -3 替换成 9
3. 这样就减法转换成了加法: 6 + 9 = 15
4. 由于 15 超过了 12, 所以需要模 12
5. 15 mod 12 = 3

同理, 二进制数 0101 - 0001 的计算方法:

1. 由于是 4 位二进制数, 所以要对 2<sup>4</sup> = 16 = 10000 取模
2. 找到 -0001 对应的数, 那么 0001 对应的数为: 10000 - |-0001| = 1111
3. 把算式中的 -0001 替换成 +1111
4. 这样就减法转换成了加法: 0101 + 1111 = 10100
5. 由于 10100 超过了 10000, 所以需要模 10000
6. 10100 mod 10000 = 0100

把 1111 称为 -0001 的补码。

## 补码

补码（Two's Complement）主要用于表示带符号的整数。补码可以简化硬件设计，使得加法和减法可以使用相同的电路来实现，同时还可以避免正零和负零的区别。

- 正数的补码就是其本身的二进制表示。例如，+5 在 4 位系统中表示为 0101
- 负数的补码表示(方法 1): 在 n 位系统中, 使用 2<sup></sup> 减去该负数的绝对值。例如, 在 4 位系统中, -5 的补码为 2<sup>4</sup> = 10000 - |-0101| = 1011
- 负数的补码表示(方法 2): 找出正数形式的二进制表示, 将该二进制数每一位取反, 将得到的反码加 1。例如, 在 4 位系统中, -5 的补码为:
  1. 先表示成正数: 0101
  2. 每一位取反: 1010
  3. 将得到的反码加 1: 1011
