# 习题

1. 假设基准程序 A 在某计算机上的运行时间为 100s, 其中 90s 为 CPU 时间, 其余是 I/O 时间。若 CPU 速度提高 50%, I/O 速度不变, 则运行基准程序 A 所耗费的时间是:
   ```
   CPU时间: 90 / (1 + 50%) = 60s
   I/O时间不变
   总时间： 60 + 10 = 70s
   ```
2. 程序 P 在机器 M 上的执行时间是 20s, 编译优化后, P 执行的指令数减少到原来的 70%, 而 CPI 增加到原来的 1.2 倍, 则 P 在 M 上的执行时间是:

   ```
   设: M的原时钟周期为a, 原CPI为b, P的原指令条数为c
   则P的原执行时间为: a × b × c = 20s

   编译优化后, P的执行时间为:
     a × (1.2 × b) × (0.7 × c)
   = (1.2 × 0.7) × (a × b × c)
   = 1.2 × 0.7 × 20 = 16.8s
   ```

3. 某计算机主频为 1.2GHz, 其指令分为 4 类, 它们在基准程序中所占比例及 CPI 如下, 求该机的 MIPS 数
   - 指令类型 A: 所占比例 50%, CPI 2
   - 指令类型 B: 所占比例 20%, CPI 3
   - 指令类型 C: 所占比例 10%, CPI 4
   - 指令类型 D: 所占比例 20%, CPI 5
   ```
   基准程序的CPI = 2 × 0.5 + 3 × 0.2 + 4 × 0.1 + 5 × 0.2 = 3
   1.2GHz = 1200MHz
   每秒有1200M个时钟周期, 每条指令需要3个时钟周期,
   所以MIPS = 1200 / 3 = 400
   ```
4. 机器 M 的时钟频率为 200MHz, 程序 P 在 M 上的执行时间为 12s。对 P 优化时, 将其所有乘 4 的指令都替换成一条左移两位的指令, 得到优化的程序 P'。若在 M 上乘法指令的 CPI 为 102, 左移指令的 CPI 为 2, P 的执行时间是 P'的 1.2 倍, 则 P 中的乘法指令条数是多少
   ```
   P'的执行时间: P' × 1.2 = 12s => P' = 10s
   P'的执行时间比P多了2s。M的主频为200MHz, 所以1秒有200M个时钟周期。
   所以P的执行比P'多了 2 × 200M = 400M 个时钟周期 => 400M = 4 × 10^8
   每条乘法指令比左移多了 102 - 2 = 100 个时钟周期。
   所以这 4 × 10^8 个时钟周期都是乘法指令,
   所以乘法指令条数是 (4 × 10^8) / 100 = 4 × 10^6 条
   ```
5. 计算机 A 的时钟频率为 800MHz, 假设某程序在 A 上运行需要 12s。现在要设计计算机 B, 希望该程序在 B 上运行时间缩短为 8s, 使用新技术后可使 B 的时钟频率大幅度提高, 但在 B 上运行该程序所需的时钟周期数为 A 的 1.5 倍。那么, B 的时钟频率至少是多少, 才能达到要求
   ```
   程序在A上运行完成一共需要的时钟周期数: 800M × 12 = 9600M
   则程序在B上运行完成一共需要的时钟周期数: 9600M × 1.5 = 14400M
   14400M个时钟周期需要在8s执行完成, 所以1s需要 14400M / 8 = 1800M 个时钟周期
   所以时钟频率是1800MHz = 1.8GHz
   ```
