# 死锁

死锁（Deadlock）指的是两个或多个进程在执行过程中，因争夺资源而造成的一种僵局。在这种僵局中，每个进程都持有一定的资源并等待其他进程释放它们所需的资源，若无外力作用，这些进程都将无法继续向前推进。

## 死锁产生的必要条件

死锁具有以下四个基本特征，通常被称为死锁的四个必要条件：

1. **互斥条件**（Mutual Exclusion）：进程对所分配到的资源进行排他性使用，即在一段时间内某资源只能被一个进程占用。
2. **占有和等待条件**（Hold and Wait）：进程至少持有一个资源，并且在等待获取其他进程持有的资源。
3. **不可剥夺条件**（No Preemption）：已经分配给一个进程的资源，在未使用完之前，不能被强行剥夺，只能由该进程自己释放。
4. **循环等待条件**（Circular Wait）：存在一种进程资源的循环等待关系，即进程间形成一种头尾相接的循环链，每个资源至少被链条上的下一个进程所等待。

## 死锁的预防

通过破坏死锁的四个必要条件之一来预防死锁的发生:

- 互斥条件：在某些情况下，可以尝试将资源的互斥性去除。缺点：可行性不高，很多时候无法破坏互斥条件
- 占有和等待条件：要求进程在请求新资源的同时，放弃已占有的资源。缺点：资源利用率低, 可能导致饥饿
- 不可剥夺条件：允许系统在需要时，剥夺进程占有的资源。缺点：实现复杂, 反复申请和释放导致系统开销大, 可能导致饥饿
- 循环等待条件：通过定义资源类型的线性排序，规定进程按顺序请求资源。缺点：不方便增加新设备, 会导致资源浪费, 用户编程麻烦
