# 进程调度

进程调度（Process Scheduling）是操作系统中的一个核心功能, 它负责决定哪个进程（Process）将在处理器上执行, 以及它们将执行多长时间。

进程调度的过程:

1. 调度器激活: 调度器的激活可以由多种事件触发, 如时钟中断、进程状态改变、系统调用结束、I/O 操作完成等
2. 当前进程状态的评估: 调度器首先评估当前运行进程的状态。如果当前进程已经完成了其时间片、进入等待状态或终止, 则需要进行调度
3. 选择下一个进程: 根据调度算法（如 FCFS、SJF、RR、优先级调度等）, 调度器从就绪队列中选择下一个要执行的进程
4. 进程上下文切换: 一旦选择了下一个进程, 调度器将执行上下文切换, 这包括保存当前进程的上下文（如程序计数器、寄存器值等）和加载新进程的上下文
5. 执行新进程: 上下文切换完成后, 新选择的进程开始执行

进程调度中常用的算法包括以下几种:

1. 先来先服务: 最简单的调度算法, 按照进程到达的顺序进行调度
2. 短作业优先: 优先调度预计运行时间最短的进程
3. 高响应比优先: 综合了先来先服务和最短作业优先两种算法的特点
4. 优先级调度: 进程根据优先级被调度, 高优先级的进程可以抢占低优先级进程的 CPU
5. 轮转调度: 每个进程被分配一个固定的时间片, 当时间片用完时, 如果进程还在执行, 它将被中断并放回就绪队列的末尾
6. 多级反馈队列: 结合了优先级和轮转调度, 进程可以在不同的队列中根据其行为动态调整优先级

在操作系统中, 进程调度可以根据是否允许中断当前正在执行的进程来分为抢占式（Preemptive）和非抢占式（Non-preemptive）两种模式。

## 非抢占式调度

非抢占式（Non-preemptive）调度, 又称为不可剥夺调度, 指的是一旦 CPU 分配给某个进程, 该进程将一直运行直到完成或者自愿放弃 CPU（例如, 它可能因为等待 I/O 操作而阻塞）。在非抢占式调度中, 即使有更高优先级的进程到达, 也不会中断当前正在执行的进程。这种调度方式简单, 但可能导致短作业（Short Job）长时间等待, 因为它们必须等待长作业（Long Job）完成。

非抢占式调度包括: 

- 先来先服务
- 短作业优先
- 高响应比优先

## 抢占式调度

抢占式（Preemptive）调度, 又称为可剥夺调度, 允许操作系统根据某种策略中断当前正在执行的进程, 并将其挂起, 然后将 CPU 分配给另一个进程。这种调度方式可以更好地响应紧急任务和高优先级任务, 提高了系统的响应性和吞吐量。抢占通常基于时钟中断, 操作系统会定期检查是否需要进行上下文切换。

抢占式调度包括: 

- 轮转调度
- 优先级调度
- 多级反馈队列

非抢占式调度简单, 但可能导致短作业等待时间过长, 而抢占式调度虽然复杂, 但可以提供更好的响应时间和系统吞吐。在实际的操作系统中, 抢占式调度更为常见, 因为它能够更好地适应动态变化的系统需求和用户请求。
