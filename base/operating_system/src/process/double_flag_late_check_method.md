# 双标志后检查法

双标志后检查法(Double Flag Late Check Method)改版, 它使用先"上锁"后"检查"的方法, 来避免双标志先检查法的问题。

### 工作原理

1. **初始化标志位**: 进程 0 和进程 1 都有一个对应的标志位`flag[0]`和一个`flag[1]`。`flag[i]`用于表示进程 i 是否想要进入临界区

2. **尝试进入临界区**: 进程 0 首先尝试进入临界区, 它将自己的标志位`flag[0]`设置为真, 然后检查另一个进程 1 的标志位`flag[1]`

3. **后检查**: 如果`flag[1]`为假, 表示没有其他进程正在临界区或正在尝试进入临界区, 那么进程 0 可以安全地进入临界区。如果`flag[1]`为真, 进程 0 需要等待直到`flag[1]`变为假

4. **离开临界区**: 进程 0 在离开临界区时, 将自己的标志位`flag[0]`设置为假, 表示它已经离开临界区

双标志后检查法虽然解决了双标志先检查法的问题, 但是如果两个进程都争着想进入临界区, 但是谁也不让谁, 最后谁都无法进入临界区, 违反了空闲让进和有限等待原则。
