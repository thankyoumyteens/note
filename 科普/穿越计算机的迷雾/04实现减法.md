# 减法运算时避免借位

补数: 补数是一种处理有符号数的方法, 用于变换数字的符号。常在计算机科学中应用, 被称为"补码"。

## 减数小于被减数

实现 `253 - 176 = 77`
* 为了避免借位, 首先从999中减去减数: `999 - 176 = 823`
* 由于操作数是三位数, 所以使用999, 如果操作数是四位数, 则使用9999
* 从一串9中减去一个数叫做对9求补数
* 无论减数是多少, 计算对9的补数都不需要借位
* 计算出减数对9的补数后, 将补数与被减数相加: `823 + 253 = 1076`
* 最后将结果加1后再减去1000: `1076 + 1 - 1000 = 77`
* 到此, 得到了结果

原理
* `253 - 176 == 253 - 176 + 1000 - 1000`
* 变形后: `253 - 176 + 999 + 1 - 1000`
* 将数字重新组合: `999 - 176 + 253 + 1 - 1000`
* 此时与上面的计算方法一样了

## 减数大于被减数

实现 `176 - 253 = -77`
* 为了避免借位, 首先从999中减去减数: `999 - 253 = 746`
* 计算出减数对9的补数后, 将补数与被减数相加: `746 + 176 = 922`
* 最后用999减去上一步得到的结果: `999 - 922 = 77`
* 将结果符号取反, 就得到了结果`-77`

原理
* `176 - 253 == 176 - 253 + 999 - 999`
* 变形后: `999 - 253 + 176 - 999`
* 将数字重新组合: `-999 + (999 - 253 + 176)`
* 此时与上面的计算方法一样了

# 计算二进制减法

* 计算二进制减法时, 与上面十进制的方法一致, 区别在于减数是由一串1中减去的, 结果称为1的补数
* 在计算1的补数时, 只需要将二进制按位取反即可得到结果(反码)

# 负数的表示方式

## 十进制负数

这种方法需要先确定好数字的表示范围

假设正数不超过500, 负数最小是-500, 正常的表示方法为:
```
-500,-499,...-2,-1,0,1,2,...498,499
```
一共有1000个数, 由于我们不需要500到999之间的正数, 所以可以用500到999之间的数字来表示负数, 具体为:
```
用 500 表示 -500
用 501 表示 -499
用 502 表示 -498
...
用 998 表示 -2
用 999 表示 -1
用 000 表示 0
用 001 表示 1
用 002 表示 2
...
用 497 表示 497
用 498 表示 498
用 499 表示 499
```
现在的表示方法为:
```
500,501,...-998,999,0,1,2,...498,499
```
这种表示方法称为10的补数。

将三位负数转换为10的补数的方法: 用999减去它再加1。也就是说对10求补就是对9求补后再加1。

例如-499对10的补数是999-499+1等于501, 而501对10的补数是999-501+1等于499, 由于501表示的是负数所以结果是-499

## 计算十进制减法

现在， 算一下`143 - 78 = 65`
* 减一个数等于加上它的负数
* -78对10的补数等于999-78+1等于922
* `143 + 922 = 1065`
* 由于这种表示法只能使用三位数, 因此丢掉第四位的1, 结果是065

再算一下`65 - 150 = -85`
* 减一个数等于加上它的负数
* -150对10的补数等于999-150+1等于850
* `65 + 850 = 915`
* 由于915实际表示的是-85, 所以结果就是-85

## 二进制负数

和十进制一样, 以8为二进制数为例, 范围是00000000到11111111, 对应十进制的0到255。
现在从00000000到01111111表示正数, 10000000到11111111表示负数。此时最高位可以看作是符号位, 最高位是0表示正数, 最高位是1表示负数

二进制数|十进制数
-|-
10000000|-128
10000001|-127
10000010|-126
...|...
11111110|-2
11111111|-1
00000000|0
00000001|1
00000010|2
...|...
01111101|125
01111110|126
01111111|127

为了计算2的补数, 需要先计算1的补数再加1, 这相当于将每位取反再加1。用同样的步骤, 将每位取反再加1可以将补数还原

## 二进制减法

使用这种表示法, 无论计算加法还是减法, 都可以通过把两个数直接相加得到

例如计算`124 - 127 = -3`, 二进制表示是`01111100 + 10000001 = 11111101`

## 溢出(无效的计算结果)

如果将两个125相加, 那么结果超出了能表示的正数范围, `01111101 + 01111101 = 11111010`, 结果变成了-6, 此时称为溢出。

如果将两个-125相加, 结果同样超出了能表示的范围, `10000011 + 10000011 = 100000110`, 结果变成了9位二进制数, 由于只能使用8位所以第9位被丢弃, 变成了00000110,相当与十进制的+6, 也发生了溢出。
