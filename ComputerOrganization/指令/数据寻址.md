# 数据寻址

数据寻址的方式比较多，在指令字中必须设置一个字段来表明是哪种寻址方式。并且指令的地址字段通常都不表示操作数的有效地址，我们把它称为形式地址，记作 A ，有效地址记作 EA(effective address)，由寻址方式和形式地址共同确定。

![](img/addr1.png)

# 立即寻址

立即寻址的特点是操作数就在指令内，因此，指令字中的形式地址A就是操作数，也叫做立即数，采用补码的形式存放，在执行阶段不访问内存。

但是指令的位数是有限的，这也就限制了立即数的范围。

# 直接寻址

直接寻址的指令字中的形式地址A就是操作数的有效地址EA，即 EA=A；

他的优点就是，从指令中可以直接的得到操作数的有效地址，且只访问内存一次。缺点呢就是A的位数限制了操作数的寻址范围，而且，必须修改A的值才能修改A的地址。

# 隐含寻址

隐含寻址就是不明显的给出操作数的地址，操作数的地址隐含于操作数或某个寄存器内，

例如，一地址格式的加法指令只给出一个操作数的地址，另外一个操作数的就隐含在ACC累加器中，这样，累加器的地址就是操作数的地址。

这种隐含寻址的方式在指令字中就少了一个地址，有利于缩短指令字长。

# 间接寻址

间接寻址的操作数的有效地址是由指令字中的形式地址A给出的，也就是指令字中给出的是真实地址的地址，即EA=(A)，先根据形式地址A找到EA的地址，再从EA中取出实际操作数的地址；

间接寻址的优点有，扩大了操作数的寻址范围，便于编制程序。

缺点就是，在执行阶段要访问内存两次或多次执行时间过长。

# 寄存器直接寻址

寄存器直接寻址指令字中形式地址A的内容是寄存器的编号，操作数在指定编号的寄存器里。

由于寄存器直接寻址不访问内存，执行的速度加快，而且，只需指定寄存器的编号就可以了（计算机内寄存器数量有限），所需指令字较短，节省了储存空间。因此寄存器寻址在计算机中得到广泛应用。

# 寄存器间接寻址

寄存器间接寻址也是指定寄存器编号，但是寄存器内存放的并不是操作数，而是操作数的有效地址。

有效地址在寄存器中，操作数在存储器中，执行阶段访存，但访存比间接寻址少一次，便于编制循环程序

# 基址寻址

基址寻址需要有基址寄存器，操作数的有效地址等于基址寄存器中的内容加上形式地址A，即 基地址+偏移地址。

基址寄存器分为隐式和显式。

隐式是指计算机内设有一个专门的基址寄存器BR(base address register)，用户不必明显指出该基址寄存器，只需由寻址特征位反应基址寻址就可以。

显式是在指令中寻址特征字段后额外加一个字段来指定一个通用寄存器用于存放基地址。

基址寻址中的BR由操作系统根据主存的使用情况分配初始值，便可将用户程序的逻辑地址转化为主存的物理地址（实际地址）。

基址寻址主要用于为程序或数据分配内存空间，故基址寄存器的内容通常由操作系统或管理程序确定，在程序的执行过程中其值是不可变的，而指令字中的形式地址A是可变的。

# 变址寻址

变址寻址与基址寻址极为相似，有效地址等于指令字中的形式地址A与变址寄存器IX( index register)的内容相加。

也可用通用寄存器作为变址寄存器。

在变址寻址中，变址寄存器的内容是用户设定的，在程序执行过程中其值可变，而指令字中的A是不可变的。

变址寻址主要用于处理数组问题，在数组处理过程中，可设定A为数组的首地址，不断改变变址寄存器的IX内的内容，便可以得到数组中任一数据中的地址，特别适合编制循环程序。

# 相对寻址

相对寻址的有效地址是将程序计数器PC内容与指令字中形式地址A相加而成，A中存储的是相对PC偏移的地址。

相对寻址最大的特点就是转移地址不固定，他随PC值的变化而变化，因此，无论主程序在哪段区域，都可正常运行，对编写浮动程序特别有利。

# 堆栈寻址

堆栈要求计算机中设有堆栈，可以用寄存器组，也可以主存的一部分空间来做堆栈。

操作数只能从栈顶地址指示的主存单元进行存或取。

栈顶地址由栈顶指针SP指出。
