# 循环冗余校验

循环冗余校验（Cyclic Redundancy Check， CRC）是一种根据网络数据包或计算机文件等数据产生简短固定位数校验码的一种信道编码技术，主要用来检测或校验数据传输或者保存后可能出现的错误。它是利用除法及余数的原理来作错误侦测的。

# 多项式

多项式和二进制数有直接对应关系：x的最高幂次对应二进制数的最高位，以下各位对应多项式的各幂次，有此幂次项对应1，无此幂次项对应0。

可以看出：x的最高幂次为R，转换成对应的二进制数有R+1位。

多项式包括生成多项式和信息多项式

# 求循环冗余校验码

设
- 信息多项式M(x)为`x^3+1`, 等于`1x^3+0x^2+0x^1+1x^0`, 则对应的二进制为`1001`
- 生成多项式G(x)为`x^3+x+1`, 等于`1x^3+0x^2+1x^1+1x^0`, 则对应的二进制为`1011`

把信息位`1001`左移生成多项式的最高次方位, 此处是3位, 得到`1001000`

对`1001000`进行模2除法

被除数是`1001000`, 除数是`1011`

```
            1 0 1 1     //商
      ---------------
1011| 1 0 0 1 0 0 0     //被除数,注意首位为1
      1 0 1 1	        //被除数首位为1,除以除数
      ---------------   //1001和1011进行异或操作
        0 1 0 0 0 0     //余数(0010)去除首位,作为新的被除数(010000)
        0 0 0 0         //被除数首位为0,除以0
      ---------------   //异或
          1 0 0 0 0     //余数去除首位,作为新的被除数
          1 0 1 1       //被除数首位为1,除以除数  
      ---------------   //异或
            0 1 1 0     //余数去除首位,作为新的被除数
            0 0 0 0     //被除数首位为0,除以0
      ---------------   //异或
              1 1 0     //余数,此时余数位数少于除数,不能继续除了
```

把余数`110`取出来与被除数`1001000`相加, 得到`1001110`, 这就是循环冗余校验码

# 校验

设接收方收到的数据为`1001110`

把接收到的数据与生成多项式的二进制`1011`进行模2除法

```
      ---------------
1011| 1 0 0 1 0 0 0  
      1 0 1 1
      ---------------
          1 0 1 1
          1 0 1 1
      ---------------
          0 0 0 0

```

得到余数为0, 表示没有错误

若余数非零, 则表示数据出错, 但是不能确定哪一位出错
