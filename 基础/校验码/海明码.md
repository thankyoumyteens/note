# 规定

- 设: 数据有m位, 校验码有p位
- 则: 校验码一共有2^p种取值

海明码需要用校验位指出含有校验码的数据中每一位的错误, 所以校验码的2^p种取值至少要能表示m+p个数, 再加上所有位都正确的1种情况, 所以: `2^p >= m+p+1`

# 校验码在数据中的位置

- p1在第1位, 即2^0
- p2在第2位, 即2^1
- p3在第4位, 即2^2
- p4在第8位, 即2^3
- ......

设: m=4, p=3

则: 含有校验码的数据为:

| 索引 | 数据+校验码 |
| ---- | ----------- |
| 1    | p1          |
| 2    | p2          |
| 3    | m1          |
| 4    | p3          |
| 5    | m2          |
| 6    | m3          |
| 7    | m4          |

# 数据和校验码分组

## 分组规则:

- 索引用二进制表示
- 每个校验位分出一个组
- 数据的索引中1的位置和某个校验位索引中1的位置相同则分到一组

## 分组

- p3的索引为`1(0001)`, 1在右数第1位
- p3的索引为`2(0010)`, 1在右数第2位
- p3的索引为`4(0100)`, 1在右数第3位
- m1的索引为`3(0011)`, 1在右数第1和第2位, 能和p1、p2一组, 不能和p3一组
- m2的索引为`5(0101)`, 1在右数第1和第3位, 能和p1、p3一组, 不能和p2一组
- m3的索引为`6(0110)`, 1在右数第2和第3位, 能和p2、p3一组, 不能和p1一组
- m4的索引为`7(0111)`, 1在右数第1、第2和第3位, 能和p1、p2和p3一组

索引分组

1. 1 3 5 7
2. 2 3 6 7
3. 4 5 6 7

索引对应的数据分组
1. p1 m1 m2 m4
2. p2 m1 m3 m4
3. p3 m2 m3 m4

# 求校验码

用求奇偶校验码的方法求出p

设: 
- m1=1
- m2=0
- m3=1
- m4=0

则:
- p1=0(奇校验) 或 p1=1(偶校验)
- p2=1(奇校验) 或 p2=0(偶校验)
- p3=0(奇校验) 或 p3=1(偶校验)

# 得到海明码

- 奇校验: 0110010
- 偶校验: 1011010

# 校验

设接收到的数据为:
- 奇校验: 0110110

按照上面的方法分组
```
0 1 1 0
1 1 1 0
0 1 1 0
```
每组前面加上错误标记位
```
e1 0 1 1 0
e2 1 1 1 0
e3 0 1 1 0
```
按照奇校验规则求出e
- e1=1
- e2=0
- e3=1

按照e1e2e3的顺序排列得到: 101, 十进制是5

所以得出第5为出错了

如果e1e2e3都是0, 则表示没有出错

偶校验同理
