# 浮点数加减法

- 浮点运算要把阶码和尾数分别处理
- 阶码的运算是定点整数运算
- 尾数的运算是定点小数运算

# 对阶

对阶就是比较参与运算的浮点数的阶码大小，然后使他们的阶码一样。使参与运算的数的小数点位置对齐，以便得出正确的结果。

## 对阶的原则

通常以大阶码为准, 将小阶码的值调成与大阶码的值一样, 并对小阶码的尾数的小数点进行右移(右移比左移损失的精度要少)

就像十进制数的1.2345 * 10^3，如果将指数3变成5，那么尾数1.2345的小数点位置要向左移两位，变成0.012345，所以，最终的形式为0.012345 * 10^5。

## 对阶的步骤

1. 比较两个阶码的大小, 并求出大阶码减去小阶码的值ΔE
2. 当ΔE≠0时, 将小阶码的尾数右移ΔE位

# 尾数运算

完成对阶后，将两浮点数的尾数部分相加减，方法与定点小数加减法相同

# 规格化处理

规格化处理主要是针对浮点数的尾数部分，规格化的尾数格式要求如下:

单符号位
- 尾数采用原码表示时：正数的规格化格式为：0.1XXX，负数的规格化形式为1.1XXX
- 尾数采用补码表示时：正数的规格化格式为：0.1XXX，负数的规格化形式为：1.0XXX

双符号位
- 尾数采用补码表示时：正数的规格化格式为：00.1XXX，负数的规格化形式为：11.0XXX

可见, 符号位与尾数最高位不一致才算是规格化，一致为非规格化

## 规格化的步骤

- 若尾数溢出, 则进行向右规格化。将尾数(包含符号位)右移n位, 并将阶码加n
- 若尾数没有溢出, 则进行向左规格化。将尾数(包含符号位)左移n位, 并将阶码减n

# 舍入操作

在"对阶"和向左，向右规格化处理时，尾数要向左，向右移位，这样结果尾数与原先的尾数就会有一定的误差，因此要进行舍入处理，以尽可能减小这种误差。

## 0舍1入法

- 如果左规或右规时丢弃的部分最高位是0，则舍去不计
- 如果左规或右规时丢弃的部分最高位是1，将尾数的末尾加1

## 恒置1法

只要有数位被左规或者右规丢弃掉，就要在尾数的末尾恒置1，但是这个方法精确度不高，因为从概率上来讲，丢弃0和1的概率各占50%

# 溢出判断

- 浮点数的溢出判断方法是对规格化数的阶码进行判断
- 当浮点数的阶码大于机器所能表示的最大阶码时, 阶码发生正溢出
- 浮点数的尾数运算的溢出可以通过右规消除，所以不算溢出
- 当浮点数的阶码小于机器所能表示的最小阶码时, 阶码发生负溢出, 这时一般规定把该浮点数的尾数强迫置零, 作为零处理
- 当一个浮点数的尾数为0, 不论其阶码为何值, 都把该浮点数看成零值
