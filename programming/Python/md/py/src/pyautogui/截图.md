# 截图

```python
import pyautogui

# 返回Pillow/PIL图像对象
pyautogui.screenshot()
# 返回Pillow/PIL图像对象, 并将其保存到文件
pyautogui.screenshot('1.png')
```

## python3.12 截图报错

报错:

```sh
Traceback (most recent call last):
  File "C:\cv2_demo.py", line 99, in <module>
    pyautogui.screenshot('screen.png', region=(0, 0, 1920, 1080))
  File "C:\Python312\Lib\site-packages\pyautogui\__init__.py", line 228, in _couldNotImportPyScreeze
    raise PyAutoGUIException(
pyautogui.PyAutoGUIException: PyAutoGUI was unable to import pyscreeze. (This is likely because you're running a version of Python that Pillow (which pyscreeze depends on) doesn't support currently.) Please install this module to enable the function you tried to call.
```

解决:

```sh
pip install --upgrade Pillow
```

## Mac 上无法生成截图文件

看源码, 如果 Pillow 版本高于 6.2.1 就会走 else, else 里的逻辑是直接返回图片对象, 而不会保存:

```py
def _screenshot_osx(imageFilename=None, region=None):
    if PILLOW_VERSION < (6, 2, 1):
        if imageFilename is None:
            tmpFilename = 'screenshot%s.png' % (datetime.datetime.now().strftime('%Y-%m%d_%H-%M-%S-%f'))
        else:
            tmpFilename = imageFilename
        subprocess.call(['screencapture', '-x', tmpFilename])
        im = Image.open(tmpFilename)
        # ...
    else:
        # Use ImageGrab.grab() to get the screenshot if Pillow version 6.3.2 or later is installed.
        if region is not None:
            im = ImageGrab.grab(bbox=(region[0], region[1], region[2] + region[0], region[3] + region[1]))
        else:
            # Get full screen for screenshot
            im = ImageGrab.grab()
    return im
```

解决方法, 自己保存图片:

```py
im = pyautogui.screenshot(region=(0, 0, x, y))
im.save('screen.png')
```
