# 数字水印

数字水印（Digital Watermarking）是一种隐藏在数字内容（如图像、音频、视频、文档）中的不可见（或低可见性）信息，核心作用是实现对数字内容的版权保护、来源追踪、完整性验证或内容标注，且不影响原始内容的正常使用和感知质量。

将一个需要隐藏的二值图像信息嵌入载体图像(能够隐藏其他图像的图像)的最低有效位，即将载体图像的 bit0 位平面替换为当前需要隐藏的二值图像，从而实现将二值图像隐藏的目的。由于二值图像处于载体图像的最低有效位上，所以嵌入二值图像对于载体图像的影响非常小，其具有较高的隐蔽性。在必要时直接将载体图像的最低有效位层提取出来，即可得到嵌入在该位上的二值图像，达到提取秘密信息的目的。

## 嵌入水印

1. 创建一个和载体图像大小相同的提取矩阵, 矩阵中的每个元素的值均为 254(11111110)
2. 将载体图像与提取矩阵进行按位与运算, 将载体图像内所有像素的高七位保留、最低位清零
3. 将水印图像(二值图像)中的像素值为 255 的都转换为像素值 1，以方便嵌入载体图像
4. 将载体图像与水印图像进行按位或运算，把水印信息嵌入载体图像内

```py
# 以灰度图为例
img = cv2.imread('a.png')
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
height, width = gray.shape
# 创建一个和载体图像大小相同的提取矩阵
matrix = np.zeros((height, width), dtype=np.uint8)
# 矩阵中的每个元素的值均为 254
matrix[:, :] = 254
# 将载体图像内所有像素的高七位保留、最低位清零
gray = cv2.bitwise_and(gray, matrix)
# 获取水印图像
watermark_img = get_watermark('hello world', height, width)
# 把水印信息嵌入载体图像内
result = cv2.bitwise_or(gray, watermark_img)

cv2.imshow('result', result)
cv2.waitKey(0)
```

## 提取水印
