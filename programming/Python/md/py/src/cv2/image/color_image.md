# 彩色图像

彩色图像（Color Image）是一种包含**色彩信息**和**亮度信息**的图像类型，通过多个通道（通常为 3 个或 4 个）的亮度值组合，呈现出人眼可感知的丰富色彩，是日常生活中最常见的图像格式（如照片、屏幕显示、视频帧等）。

彩色图像的本质是**通过多个独立的“亮度通道”按特定规则混合，模拟人眼对色彩的感知**。OpenCV 读取的彩色图像是 **3 通道或 4 通道的 NumPy 数组**，数组形状为 `(高度, 宽度, 通道数)`：

- 3 通道：存储色彩信息（如 BGR、RGB），是最主流的彩色图像格式
- 4 通道：在 3 通道基础上增加透明通道（Alpha 通道），支持透明效果（如 BGRA）

每个通道本身是一张“单通道灰度图”，通道内的像素值（通常为 0~255）代表该色彩分量的**亮度强度**——例如，红色通道中像素值 255 表示“该位置红色最强”，0 表示“该位置无红色”；最终像素的颜色由所有通道的亮度值共同决定。

OpenCV 因历史兼容性（早期与摄像头硬件接口适配），默认读取的彩色图像为 **BGR 格式**（通道顺序：蓝 Blue → 绿 Green → 红 Red），而非日常接触的 RGB 格式（红 → 绿 → 蓝）。两者的通道组合逻辑一致，但通道顺序不同，需重点区分。

BGR 是 OpenCV 处理彩色图像的“原生格式”，3 个通道分别存储蓝、绿、红的亮度值，通过三通道亮度混合呈现彩色：

- B 通道（索引 0）：存储蓝色分量的亮度（0=无蓝，255=纯蓝）
- G 通道（索引 1）：存储绿色分量的亮度（0=无绿，255=纯绿）
- R 通道（索引 2）：存储红色分量的亮度（0=无红，255=纯红）

每个像素的最终颜色由 B、G、R 三通道的亮度值共同决定，例如：

- B=255, G=0, R=0 → 纯蓝色
- B=0, G=255, R=255 → 黄色（绿+红混合）
- B=255, G=255, R=255 → 白色（三通道亮度最大）
- B=0, G=0, R=0 → 黑色（三通道亮度最小）

在 BGR 3 通道基础上增加 **Alpha 通道（A 通道，索引 3）**，用于存储“透明度信息”，解决图像叠加时的遮挡问题：

- A 通道像素值含义：0=完全透明（像素不显示，透出底层图像），255=完全不透明（像素完全显示，遮挡底层），0~255 之间为半透明。

## 读取彩色图像

使用 `cv2.imread()` 时，默认参数为 `cv2.IMREAD_COLOR`（或简写为 1），读取后直接返回 BGR 格式的 3 通道数组；若需读取透明通道（如 PNG 图像），需指定 `cv2.IMREAD_UNCHANGED`（或 -1）。

```python
import cv2
import numpy as np

# 1. 读取默认 BGR 彩色图（3通道，自动丢弃透明通道）
bgr_img = cv2.imread("flower.jpg")  # 等价于 cv2.imread("flower.jpg", 1)
print(bgr_img.shape)  # 输出 (高度, 宽度, 3)，如 (480, 640, 3)

# 2. 读取带透明通道的彩色图（4通道，如 PNG 图像）
bgra_img = cv2.imread("logo.png", cv2.IMREAD_UNCHANGED)  # 或参数 -1
print(bgra_img.shape)  # 输出 (高度, 宽度, 4)，如 (200, 200, 4)
```

应用场景

- 日常视觉呈现：照片、视频、屏幕显示（如手机相册、电影），通过色彩提升视觉体验
- 色彩识别任务：交通灯检测（红/黄/绿区分）、果实成熟度判断（青/红区分）、皮肤病变诊断（异常颜色区域识别）
- 图像美化与编辑：Photoshop、手机修图软件（调整色彩饱和度、对比度、滤镜效果）
- 复杂场景分割：语义分割（如自动驾驶中，通过色彩区分道路、车辆、行人、天空）
