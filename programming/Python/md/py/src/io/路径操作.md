# 路径操作

## 获取当前 python 文件所在的路径

```python
import os

dist_path = os.path.abspath(os.path.dirname(__file__))
```

## 获取当前当前登录用户的家路径

```python
from pathlib import Path

home_path = Path.home()
```

## 获取当前当前工作目录的路径

```python
from pathlib import Path

work_path = Path.cwd()
```

## 获取绝对路径

```python
from pathlib import Path

# 传入相对路径
relative_path = Path('a.txt')
# 获取绝对路径
absolute_path = relative_path.resolve()
```

## 拼接路径

```python
from pathlib import Path

base_path = Path('/home')
# /home/user/bin/nginx
dist_path = base_path.joinpath('user', 'bin', 'nginx')
```

## 拆分路径

```py
from pathlib import Path

base_path = Path('/home/user/bin/nginx')
# ('/', 'home', 'user', 'bin', 'nginx')
dist_path_tuple = base_path.parts

base_path = Path('c:\\Users\\Public')
# ('c:\\', 'Users', 'Public')
dist_path_tuple = base_path.parts
```

## 获取 windows 盘符

```py
from pathlib import Path

base_path = Path('c:\\Users\\Public')
# c:
dist_drive = base_path.drive
```

## 获取文件扩展名

```py
from pathlib import Path

base_path = Path('/home/demo.txt')
# .txt
file_suffix = base_path.suffix
# demo.txt
file_name = base_path.name
# demo
file_stem = base_path.stem
# /home
file_parent = base_path.parent
```

## 获取目录下所有文件和文件夹

```python
from pathlib import Path

base_path = Path('/home')
# 获取直接下级文件和文件夹
for path_obj in base_path.iterdir():
    # /home/demo
    # /home/1.txt
    print(str(path_obj))

# 获取所有下级文件和文件夹
for path_obj in base_path.glob("**/*"):
    # /home/demo
    # /home/demo/2.txt
    # /home/1.txt
    print(str(path_obj))
```

## 创建多级文件夹

- parents = True: 创建中间级父目录
- exist_ok= True: 目标目录存在时不报错

```python
from pathlib import Path

base_path = Path('/home/demo1/demo2')
base_path.mkdir(parents=True, exist_ok=True)
```

## 复制文件

```python
from pathlib import Path
import shutil

src_path = Path('/home/demo1/1.txt')
dest_path = Path('/home/demo2/1_copy.txt')
shutil.copyfile(str(src_path), str(dest_path))
```

## 复制文件夹

```python
from pathlib import Path
import shutil

src_path = Path('/home/demo1')
dest_path = Path('/home/demo2')
# 递归复制demo1文件夹到新创建的demo2文件夹
# 若demo2文件夹存在则报错
shutil.copytree(str(src_path), str(dest_path))
```

## 移动文件

```python
from pathlib import Path

src_path = Path('/home/demo1/1.txt')
dest_path = Path('/home/demo2/2.txt')
# 如果2.txt已存在会被覆盖
src_path.replace(dest_path)
```

## 移动文件夹

```python
from pathlib import Path
import shutil

src_path = Path('/home/demo1')
dest_path = Path('/home/demo2')
# 移动整个demo1文件夹到demo2文件夹下
shutil.move(str(src_path), str(dest_path))
```

## 删除文件

```python
from pathlib import Path

src_path = Path('/home/demo1/1.txt')
src_path.unlink()
```

## 删除文件夹

```python
from pathlib import Path
import shutil

src_path = Path('/home/demo1')
# 删除文件夹及其下所有文件
shutil.rmtree(str(src_path))
```

## 重命名文件或文件夹

```python
from pathlib import Path

src_path = Path('/home/demo1/1.txt')
src_path.rename('/home/demo1/2.txt')

src_path = Path('/home/demo1')
src_path.rename('/home/demo2')
```

## 判断文件或文件夹是否存在

```python
from pathlib import Path

src_path = Path('/home/demo1/1.txt')
# 返回布尔值
src_path.exists()

src_path = Path('/home/demo1')
src_path.exists()
```

## 判断是不是文件

```python
from pathlib import Path

src_path = Path('/home/demo1/1.txt')
# 返回布尔值
src_path.is_file()
```

## 判断是不是文件夹

```python
from pathlib import Path

src_path = Path('/home/demo1')
# 返回布尔值
src_path.is_dir()
```
