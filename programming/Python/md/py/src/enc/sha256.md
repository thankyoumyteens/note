# SHA256

SHA256 是单向加密算法，只能加密无法解密，其核心作用是验证数据完整性而非数据还原。Python 可通过 hashlib 标准库实现 SHA256 加密。

SHA256 的应用场景说明

- 密码存储：数据库不直接存储明文密码，而是存储 SHA256 加密结果
- 文件完整性校验：比对下载文件与官方发布的 SHA256 值，验证是否被篡改
- 区块链技术：比特币等区块链通过 SHA256 构建区块哈希链

```py
import hashlib
import os


def sha256_with_salt(data, salt=None):
    """带盐值的SHA256加密，盐值随机生成或自定义"""
    # 确保数据为字节类型
    if isinstance(data, str):
        data = data.encode('utf-8')

    # 生成随机盐值（若未提供）
    if salt is None:
        salt = os.urandom(16)  # 16字节（128位）盐值

    # 合并数据和盐值后加密
    sha256 = hashlib.sha256()
    sha256.update(salt)
    sha256.update(data)

    # 返回盐值和加密结果（均为十六进制）
    return salt.hex(), sha256.hexdigest()


def verify_with_salt(data, salt_hex, encrypted_hex):
    """使用盐值验证数据一致性"""
    salt = bytes.fromhex(salt_hex)
    _, current_encrypted = sha256_with_salt(data, salt)
    return current_encrypted == encrypted_hex


# 示例用法
text = "敏感数据123"
salt, encrypted = sha256_with_salt(text)
print(f"盐值: {salt}")
print(f"带盐加密结果: {encrypted}")

# 验证数据
is_valid = verify_with_salt(text, salt, encrypted)
print(f"验证结果: {'成功' if is_valid else '失败'}")
```
