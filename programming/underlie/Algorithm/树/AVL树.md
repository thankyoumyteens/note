# 平衡二叉树
对于任意一个节点,左子树和右子树的高度差不能超过1
## 节点的高度
叶子节点的高度是1, 非叶子节点的高度是它的最高叶子节点的高度加1
## 节点的平衡因子
这个节点的左右子树的高度差

# 维护平衡性
节点12的平衡因子是1此时以节点12为根的子树是向左侧偏斜的,继续在不平衡节点12的左侧的左侧添加节点5
```
    12
   /
  8
 /
5
```
此时节点12的平衡因子为2,查看节点12的左节点,发现平衡因子为1,得知节点12的左子树的左侧新增了节点。此时需要右旋转操作
## 右旋转(插入的节点在不平衡节点的左侧的左侧)
```
T1~T4表示子树(可以为空)
y表示平衡因子为2的节点
x表示平衡因子为0或1的节点

       y
      / \
     x  T4
    / \
   z  T3
  / \
 T1 T2

设z的最高子树的高度为h
则z的高度为h+1
由于x平衡
则T3=h+1或h
则x=h+2
由于x的平衡因子为2
那么T4=h
```
x的右节点连接到y
y的左节点连接到原来x的右节点T3
```
x.right = y
y.left = T3

      x
    /   \
   z     y
  / \   / \
 T1 T2 T3 T4

z=h+1
T3=h或h+1
T4=h
所以y=h+1或h+2
所以x的平衡因子小于2
以x为根的树平衡
```
## 左旋转(插入的节点在不平衡节点的右侧的右侧)
```
T1~T4表示子树(可以为空)
y表示平衡因子为-2的节点
x表示平衡因子为0或-1的节点

   y
  / \
 T1  x
    / \
   T2  z
      / \
     T3 T4
```
x的左节点连接到y
y的右节点连接到原来x的左节点T2
```
x.left = y
y.right = T2

      x
    /   \
   y     z
  / \   / \
 T1 T2 T3 T4
```
## 左旋转后右旋转(插入的节点在不平衡节点的左侧的右侧)
```
T1~T4表示子树(可以为空)
y表示平衡因子为-2的节点
x表示平衡因子为0或-1的节点

       y
      / \
     x  T4
    / \
   T1  z
      / \
     T2 T3
```
先对x左旋转
```
z.left = x
x.right = T2
y.left = z

       y
      / \
     z  T4
    / \
   x  T3
  / \
 T1 T2
```
再对y右旋转
```
z.right = y
y.left = T3

      z
    /   \
   x     y
  / \   / \
 T1 T2 T3 T4
```
## 右旋转后左旋转(插入的节点在不平衡节点的右侧的左侧)
```
T1~T4表示子树(可以为空)
y表示平衡因子为-2的节点
x表示平衡因子为0或-1的节点

   y
  / \
 T1  x
    / \
   z  T4
  / \
 T2 T3
```
先对x右旋转
```
z.right = x
x.left = T3
y.right = z

   y
  / \
 T1  z
    / \
   T2  x
      / \
     T3 T4
```
再对y左旋转
```
z.right = y
y.left = T3

      z
    /   \
   y     x
  / \   / \
 T1 T2 T3 T4
```
