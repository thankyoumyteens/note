# 和2-3树的关系

- 黑色节点表示2节点
- 黑色节点和红色节点表示3节点

# 红黑树的特性

- 每个节点或者是黑色, 或者是红色
- 根节点一定是黑色
- 红色节点只能是左侧的子节点
- 红色节点是表示和父节点融合在一起的
- 红色节点的子节点一定是黑色
- 添加节点时, 永远添加红色节点, 等价于2-3树中新节点永远是先融合到已有节点中
- 从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点

# 和AVL树对比

- 红黑树只保证黑色节点是绝对平衡的, 算上红色节点的话平衡因子可能大于1
- 红黑树添加和删除占优势, 红黑树只要求部分地达到平衡要求, 降低了对旋转的要求, 从而提高了性能
- AVL树查询占优势
- 红黑树增删改查综合性能更好

# 添加元素的几种情况
## 一般情况
```
42   红
融合
42   黑
```
添加37
```
 42     黑
 /     /
37    红
```
## 左旋转
```
37   红
融合
37   黑
```
添加42
```
37       黑
  \        \
  42       红

此时需要左旋转
37.right = 42.left
42.left = 37
42.color = 37.color
37.color = 红色

 42     黑
 /     /
37    红
```
## 颜色翻转
```
 42     黑
 /     /
37    红
```
添加66
```
  42         黑
 /  \       /  \
37   66    红   红

拆分

  42         红
 /  \       /  \
37   66    黑   黑

42需要向父节点融合
```
## 右旋转
```
 42     黑
 /     /
37    红
```
添加12
```
   42     黑
   /     /
  37    红
 /     /
12    红

右旋转
42.left = 37.right
37.right = 42
37.color = 42.color
42.color = 红色

  37         黑
 /  \       /  \
12   42    红   红

再进行颜色翻转
```
## 左旋转后右旋转
```
 42     黑
 /     /
37    红
```
添加40
```
   42      黑
   /      /
  37     红
   \      \
    40     红

左旋转

   42     黑
   /     /
  40    红
 /     /
37    红

右旋转

  40         黑
 /  \       /  \
37   42    红   红

再进行颜色翻转
```
