# 内核态和用户态

现代处理器架构一般允许 CPU 至少在两种不同状态下运行，即：用户态和核心态。执行硬件指令可使 CPU 在两种状态间来回切换。与之对应，可将虚拟内存区域划分(标记)为用户空间部分或内核空间部分。在用户态下运行时，CPU 只能访问被标记为用户空间的内存，试图访问属于内核空间的内存会引发硬件异常。当运行于核心态时，CPU 既能访问用户空间内存，也能访问内核空间内存。

仅当处理器在核心态运行时，才能执行某些特定操作。实现者们利用这一硬件设计，将操作系统置于内核空间。这确保了用户进程既不能访问内核指令和数据结构，也无法执行不利于系统运行的操作。

执行系统调用会将处理器从用户态切换到核心态，以便 CPU 访问受到保护的内核内存。与用户空间的函数调用相比，哪怕是最简单的系统调用都会产生显著的开销。
