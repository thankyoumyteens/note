# g++ 基本使用

g++ 是 GNU 编译器套件（GCC）的 C++ 编译器，核心功能是将 C++ 源代码（.cpp/.cxx 等）编译链接为可执行文件或其他目标文件。

最基础的使用是 "一键编译 + 链接"，直接生成可执行文件，语法：

```sh
g++ 源代码文件.cpp -o 可执行文件名
```

示例：编译 main.cpp 并生成名为 myprogram 的可执行文件

```sh
g++ main.cpp -o myprogram
```

若省略 `-o 可执行文件名`，g++ 会默认生成名为 a.out（Linux/macOS）或 a.exe（Windows）的可执行文件。

## 常用选项

- `-o <文件名>` 指定输出文件的名称
- `-c` 仅编译(生成目标文件 .o)，不进行链接(多文件编译时常用，先分别编译再链接)
- `-Wall` 开启所有警告信息(如未使用变量、类型不匹配等)，推荐日常开发使用，减少隐患
- `-std=<标准>` 指定 C++ 标准(如 `-std=c++11`、`-std=c++17`、`-std=c++20`)
- `-g` 生成带调试信息的可执行文件(配合 GDB 调试工具使用)
- `-O<级别>` 开启代码优化(级别 0~3): `-O0`(无优化，默认)、`-O1`(基础优化)、`-O2`(常用优化，平衡速度和体积)、`-O3`(最高级优化，可能增加编译时间)

## 多文件编译

当项目有多个 C++ 文件（如 main.cpp、func.cpp）时，有两种常用方式

### 一键编译所有文件(简单场景)

直接将所有源代码文件作为输入，一次性编译链接

```sh
g++ main.cpp func.cpp -o myprogram -Wall -std=c++17
```

### 分步编译 + 链接(大型项目推荐)

先将每个 .cpp 编译为目标文件(.o)，再链接所有 .o 文件生成可执行文件，避免修改一个文件时重新编译所有文件

```sh
# 分别编译每个文件
g++ -c main.cpp -o main.o -Wall -std=c++17
g++ -c func.cpp -o func.o -Wall -std=c++17
# 链接所有 .o 文件
g++ main.o func.o -o myprogram
```
