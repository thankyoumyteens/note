# 日期操作

LocalDate 和 LocalTime 分别表示日期和时间, LocalDateTime 表示日期和时间。它们是不可变的对象, 可以进行操作, 但不能修改它们。

## 获取当前日期和时间

```java
// 2021-02-26
LocalDate now = LocalDate.now();
// 15:37:04.556
LocalTime now = LocalTime.now();
// 2021-02-26T15:37:04.556
LocalDateTime now = LocalDateTime.now();
```

## 设置日期和时间

```java
// 年月日
LocalDate date = LocalDate.of(2021, 2, 26);
// 时分秒
LocalTime time = LocalTime.of(15, 37, 4);
// 年月日 时分秒
LocalDateTime dateTime = LocalDateTime.of(2021, 2, 26, 15, 37, 4);
// 年月日 时分秒 纳秒
// 纳秒的取值范围: 0 到 999,999,999
LocalDateTime dateTime = LocalDateTime.of(2021, 2, 26, 15, 37, 4, 9999);
```

## 字符串转日期和时间

```java
// 年月日
DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");
LocalDate date = LocalDate.parse("2021-02-26", dateFormatter);
// 时分秒
DateTimeFormatter timeFormatter = DateTimeFormatter.ofPattern("HH:mm:ss");
LocalTime time = LocalTime.parse("15:37:04", timeFormatter);
// 年月日 时分秒
DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
LocalDateTime dateTime = LocalDateTime.parse("2021-02-26 15:37:04", dateTimeFormatter);
```

## 日期和时间转字符串

```java
// 年月日
DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");
String dateStr = date.format(dateFormatter);
// 时分秒
DateTimeFormatter timeFormatter = DateTimeFormatter.ofPattern("HH:mm:ss");
String timeStr = time.format(timeFormatter);
// 年月日 时分秒
DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
String dateTimeStr = dateTime.format(dateTimeFormatter);
```

## 日期加减

```java
LocalDate date = LocalDate.now();

// 加1天
LocalDate plusDays = date.plusDays(1L);
// 减1天
LocalDate minusDays = date.minusDays(1L);

// 加1月
LocalDate plusMonths = date.plusMonths(1L);
// 减1月
LocalDate minusMonths = date.minusMonths(1L);

// 加1年
LocalDate plusYears = date.plusYears(1L);
// 减1年
LocalDate minusYears = date.minusYears(1L);

// 加1周
LocalDate plusWeeks = date.plusWeeks(1L);
// 减1周
LocalDate minusWeeks = date.minusWeeks(1L);
```

## 时间加减

```java
LocalTime time = LocalTime.now();

// 加1小时
LocalTime plusHours = time.plusHours(1L);
// 减1小时
LocalTime minusHours = time.minusHours(1L);

// 加1分钟
LocalTime plusMinutes = time.plusMinutes(1L);
// 减1分钟
LocalTime minusMinutes = time.minusMinutes(1L);

// 加1秒
LocalTime plusSeconds = time.plusSeconds(1L);
// 减1秒
LocalTime minusSeconds = time.minusSeconds(1L);

// 加1纳秒
LocalTime plusNanos = time.plusNanos(1L);
// 减1纳秒
LocalTime minusNanos = time.minusNanos(1L);
```

## 日期和时间加减

LocalDateTime 包含上面日期加减和时间加减的方法。

## 日期和时间比较

```java
LocalDate date = LocalDate.now();
LocalTime time = LocalTime.now();
LocalDateTime now = LocalDateTime.now();

// 判断 date 是否在参数的日期之前
boolean dateBefore = date.isBefore(date.plusDays(1L));
// 判断 time 是否在参数的时间之前
boolean timeBefore = time.isBefore(time.plusSeconds(1L));
// 判断 now 是否在参数的日期时间之前
boolean before = now.isBefore(now.plusHours(1L));

// 判断 date 是否在参数的日期之后
boolean dateAfter = date.isAfter(date.plusDays(1L));
// 判断 time 是否在参数的时间之后
boolean timeAfter = time.isAfter(time.plusSeconds(1L));
// 判断 now 是否在参数的日期时间之后
boolean after = now.isAfter(now.plusHours(1L));

// 判断 date 和参数的日期是否相等
boolean dateEqual = date.isEqual(date.plusDays(1L));
// 时间没有isEqual方法
// 判断 now 和参数的日期时间是否相等
boolean equal = now.isEqual(now.plusHours(1L));
```

## 两个日期的间隔

```java
LocalDate date = LocalDate.now();

Period betweenDate = Period.between(date, date.plusDays(1L));
int years = betweenDate.getYears();
int months = betweenDate.getMonths();
int days = betweenDate.getDays();
```

## 两个时间的间隔

```java
LocalTime time = LocalTime.now();

Duration betweenTime = Duration.between(time, time.plusHours(1L));
long days = betweenTime.toDays();
long hours = betweenTime.toHours();
long minutes = betweenTime.toMinutes();
long millis = betweenTime.toMillis();
long nanos = betweenTime.toNanos();
```

## 指定月份的最后一天

```java
Calendar c = Calendar.getInstance();
// 设置年
c.set(Calendar.YEAR, 2020);
// 设置月份(从0开始)
c.set(Calendar.MONTH, 1); // 这是2月
// 设置月的最后一天
c.set(Calendar.DAY_OF_MONTH, c.getActualMaximum(Calendar.DAY_OF_MONTH));
// 获取Date
Date date = c.getTime();
```
