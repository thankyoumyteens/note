# CAP 定理

CAP 定理是分布式系统设计中的一个基本原则，它由加州大学伯克利分校的 Eric Brewer 教授在 2000 年提出，并在 2002 年由 Seth Gilbert 和 Nancy Lynch 从理论上证明。这个定理指出，在分布式计算中，一个系统只能同时满足一致性（Consistency）、可用性（Availability）和分区容错性（Partition tolerance）这三个需求中的两个。

- 一致性（Consistency）：指的是所有节点在同一时刻看到的数据是相同的。即，一旦一个写操作被确认成功完成，那么之后的所有节点的读操作都应该返回最新的值
- 可用性（Availability）：指的是每个请求无论是否最终成功都要得到响应。即，每个操作都应该在有限的时间内得到回复，即使这个回复是失败信息
- 分区容错性（Partition tolerance）：指的是即便一部分节点由于网络问题无法与其他节点通信时，系统仍然能够继续运作。

分区: 因为网络故障或其他原因, 导致分布式系统中的部分节点与其它节点失去连接, 形成独立的分区。

在实际应用中，分布式系统一定是需要网络的, 而网络故障是不可避免的, 所以分区容错性是必须的。

- AP: 如果要保证系统可以持续对外提供服务, 那么就不能保证系统数据的强一致性
- CP: 如果要保证系统数据的强一致性, 就要放弃高可用性

## BASE 理论

BASE 理论是 CAP 的一种解决思路。

它的三个关键概念：

- 基本可用（Basically Available）：即使在分布式系统出现故障时，允许只提供部分功能或降低服务质量，也要保证核心的功能依然可用
- 软状态（Soft State）：允许系统中的数据存在中间状态，即数据可以临时的在一段时间内不一致
- 最终一致性（Eventual Consistency）：数据虽然无法达到强一致性，但在经过一段时间的同步后(软状态结束)，最终能够达到一致

BASE 理论的核心思想在于接受一定程度的不一致性作为提高系统可用性和性能的一种手段。在分布式环境中，尤其是在互联网应用中，强一致性往往会导致性能下降或者不可用性增加。因此，许多现代的分布式系统设计都倾向于采用 BASE 理论，以达到更好的用户体验和系统表现。
