# 线程

线程(Thread)是处理器调度的最小单元，是轻量级的进程。一个进程可以包含多个线程，它们共享进程的内存空间和系统资源，但每个线程都有自己的执行路径和局部变量。

## 引入线程机制后系统的变化

1. 传统进程机制中，进程是资源分配、CPU调度的基本单位。引入线程后，进程变为资源分配的基本单位，线程成为CPU调度的基本单位
2. 传统进程机制中，只能进程间并发。引入线程后，各线程间也能并发，提升了并发度
3. 传统进程机制中，进程间切换需要保存进程的上下文，开销较大。引入线程后，同一个进程内的线程间切换只需保存线程的上下文，开销较小

## TCB

线程控制块(Thread Control Block，TCB)是操作系统中用于管理和控制线程的数据结构。每个线程都有一个对应的TCB，用于存储线程的状态信息和上下文切换所需的数据。

TCB通常包含以下信息：

1. 线程ID(Thread ID)：用于唯一标识线程的标识符
2. 线程状态(Thread State)：记录线程的当前状态，如运行、就绪、阻塞等
3. 寄存器上下文(Register Context)：保存线程在切换时的寄存器状态，包括程序计数器、栈指针、通用寄存器等
4. 栈(Stack)：存储线程的执行环境，包括方法调用栈、局部变量等
5. 优先级(Priority)：线程的执行优先级，用于调度器确定线程的执行顺序
6. 线程控制信息(Thread Control Information)：记录线程的各种控制信息，如等待的条件变量、锁等

