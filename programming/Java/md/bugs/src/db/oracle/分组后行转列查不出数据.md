# 分组后行转列查不出数据

```sql
SELECT
    ID,
    max(CASE WHEN IR_TYPE = '01' THEN IR_VAL END) AS "a",
    max(CASE WHEN IR_TYPE = '02' THEN IR_VAL END) AS "b",
    max(CASE WHEN IR_TYPE = '03' THEN IR_VAL END) AS "c"
FROM ir
GROUP BY
    ID
```

除了 ID, 其它列全是 null。

发现去掉引号后可以查出来:

```sql
SELECT
    ID,
    max(CASE WHEN IR_TYPE = 01 THEN IR_VAL END) AS "a",
    max(CASE WHEN IR_TYPE = 02 THEN IR_VAL END) AS "b",
    max(CASE WHEN IR_TYPE = 03 THEN IR_VAL END) AS "c"
FROM ir
GROUP BY
    ID
```

## 原因

IR_TYPE 那一列的数据前面多了空格:

```
 01
 02
 03
```

最后发现是录入数据时, 使用 to_char 把数字转字符串时加上的:

```sql
-- 前面会多一个空格
select to_char(1,'00') from dual;
-- 解决方法: 使用fm00
select to_char(1,'fm00') from dual;
```
