# G1 并行 Full GC

Java 10 对 G1 垃圾回收器（Garbage-Firstirst）进行了重要增强，引入了并行 Full GC（Parallel GC） 机制，解决了 G1 在 Full GC 阶段性能瓶颈的问题，显著提升了极端情况下的垃圾回收效率。

G1 作为 Java 9 的默认垃圾回收器，主要通过混合回收（Mixed GC） 逐步回收老年代区域，尽量避免 Full GC。但在以下极端场景（如内存碎片化严重、堆内存耗尽），G1 仍会触发 Full GC：

- 当老年代内存占用急剧增加，混合回收无法及时释放空间时
- 当晋升失败（对象从年轻代晋升到老年代时没有足够连续空间）时

在 Java 10 之前，G1 的 Full GC 采用单线程 Serial GC 算法，通过 “标记 - 清除 - 压缩” 的方式回收整个堆内存。这种单线程处理在大堆内存场景（如数十 GB 甚至上百 GB） 下会导致极长的停顿时间（可能达到秒级），严重影响应用的响应性。

Java 10 为 G1 引入了并行化的 Full GC 实现，核心变化是：

- Full GC 阶段的标记、清除、压缩过程均采用多线程并行处理，充分利用多核 CPU 资源
- 并行线程数默认与 Young GC 的线程数一致（可通过 `-XX:ParallelGCThreads` 调整）

这一改进使 G1 在触发 Full GC 时的停顿时间大幅缩短（通常可减少 50% 以上，具体取决于堆大小和 CPU 核心数）。
