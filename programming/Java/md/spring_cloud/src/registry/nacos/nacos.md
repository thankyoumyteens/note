# Nacos

nacos 运行机制跟 eureka 差不多，都支持服务注册和服务拉取，都支持服务提供者心跳方式做健康检测。但是 nacos 不仅仅可以由服务区拉取服务列表，也可以由注册中心主动推送服务变更信息给服务，这样服务得到的服务清单能得到及时更新。

nacos 中的服务分为临时实例和非临时实例:

- 临时实例：nacos 采用心跳模式来检测临时实例的状态，也就是需要由实例来主动发出心跳。临时实例如果心跳不正常则会被直接剔除
- 非临时实例：nacos 采用主动检测模式来检测非临时实例的状态，也就是由注册中心主动去询问实例的状态。非临时实例状态异常并不会被剔除

默认情况下，在 nacos 中注册的服务实例都是临时实例。要想修改为非临时实例，可以通过修改服务的配置文件来实现：

```yaml
spring:
  cloud:
    nacos:
      discovery:
        # 设置为非临时实例
        ephemeral: false
```
