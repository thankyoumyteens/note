# Linux

## 从 nginx 日志中找出访问量前 5 的 ip，用 linux 命令实现

```sh
awk '{print $1}' access.log | sort | uniq -c | sort -nr | head -n 5
```

执行该命令后，会输出类似以下的结果：

```
  100 192.168.1.1
   80 192.168.1.2
   60 192.168.1.3
   40 192.168.1.4
   20 192.168.1.5
```

- `awk` 命令从 Nginx 日志文件中提取 IP 地址, `$1` 表示每行的第一个字段，即 IP 地址, 根据实际情况替换
- `sort` 命令将 IP 地址按字母顺序排序
- `uniq -c` 命令会统计每个连续相同 IP 地址的出现次数，并在每行前面显示次数
- `sort -nr` 命令对统计结果按访问次数进行降序排序。`-n` 选项表示按数字进行排序，`-r` 选项表示降序排序
- `head -n 5` 命令从排序后的结果中取出前 5 行
