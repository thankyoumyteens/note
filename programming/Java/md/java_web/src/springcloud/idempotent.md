# 接口幂等性

接口幂等性: 重复调用的结果和单次调用的结果是一致的。

| 方法   | 幂等   | 描述                       |
| ------ | ------ | -------------------------- |
| GET    | 是     | GET 不会修改系统资源       |
| POST   | 否     | 每次 POST 请求都会新建数据 |
| PUT    | 不一定 | 取决于具体的操作           |
| DELETE | 不一定 | 取决于具体的操作           |

## token + rdis 实现幂等

前端在调用接口之前先向后端请求一个全局 ID(Token)。后端把这个 Token 保存到 redis 中, 前端在请求的时候携带这个 Token 一起请求, 后端需要用这个 Token 作为 Key 到 Redis 中进行校验。

如果 Key 存在就表示是第一次请求, 正常执行后面的业务逻辑, 并删除这个 Key。如果 Key 不存在就表示是重复请求, 可以返回重复执行的错误信息。

## 分布式锁实现幂等(性能差)

后端执行操作前先获取分布式锁, 操作完成后释放。如果获取不到锁就表示是重复请求。
