# 类的加载

虚拟机规范规定，一个 Java 类，首先需要从 Class 文件中以字节流读取出来，然后依次经过加载、链接和初始化这些逻辑阶段，才会成为 JVM 能够识别的格式并成为可用状态。但虚拟机规范并未规定具体实现必须按照这一顺序进行，HotSpot 就是将一些链接过程细节前移至加载阶段中实现了。例如，对 Class 文件的魔数和版本号信息在加载过程中读取到这部分数据时就“顺便”进行验证了，而不是暂存下来传递给下一阶段(链接)中验证。

加载过程将从 class 文件中读取字节流，并按虚拟机对 class 文件格式规范解析出类或接口类型的二进制描述格式，并创建相应的类或接口。

链接是让虚拟机运行时识别有效的类或接口类型的过程。该过程又被划分为 3 个逻辑环节：验证, 准备和解析。验证环节用来确保类或接口在二进制表示结构的正确性。准备环节是为类或接口的静态字段分配空间，并用默认值初始化这些字段。解析环节是将符号引用转换成直接引用的过程。验证, 准备和解析只是虚拟机规定中的逻辑阶段，并未明确强制先后的顺序，在 HotSpot 的实现中，并未严格遵从这一顺序。

初始化是执行类或接口的初始化方法的过程。

当完成加载, 链接和初始化后，这个 Java 类型就可以在 JVM 中正常使用了。
