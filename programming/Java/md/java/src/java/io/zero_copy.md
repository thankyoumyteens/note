# 零拷贝

基于传统的 I/O 读写方式，read 和 write 系统调用会触发 4 次上下文切换，4 次拷贝，流程如下:

1. 用户进程通过 `read()` 函数向内核发起系统调用，上下文从用户态切换为内核态
2. CPU 利用 DMA 控制器将数据从主存或硬盘拷贝到内核的读缓冲区
3. CPU 将读缓冲区中的数据拷贝到用户空间的用户缓冲区
4. 上下文从内核态切换回用户态，read 调用返回
5. 用户进程通过 `write()` 函数向内核发起系统调用，上下文从用户态切换为内核态
6. CPU 将用户缓冲区中的数据拷贝到内核的写缓冲区
7. CPU 利用 DMA 控制器将数据从内核缓冲区拷贝到磁盘
8. 上下文从内核态切换回用户态，write 系统调用返回

零拷贝(Zero-copy)技术指在计算机执行 IO 操作时，CPU 不需要先将数据在内核缓冲区和用户缓冲区之间复制，从而可以减少内核态和用户态之间的切换以及 CPU 的拷贝时间。
