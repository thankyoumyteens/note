# 文件描述符

文件描述符(file descriptor)是一个非负整数, 从 0 开始。进程使用文件描述符来标识一个打开的文件。

系统为每一个进程维护了一个文件描述符表, 表示该进程打开文件的记录表, 而文件描述符实际上就是这张表的索引。当进程打开(open)或者新建(create)文件时, 内核会在该进程的文件列表中新增一个表项, 同时返回一个文件描述符 —— 也就是新增表项的下标。

每个进程默认都有 3 个文件描述符: 0 (stdin)、1 (stdout)、2 (stderr)。

socket 可以用于同一台主机的不同进程间的通信, 也可以用于不同主机间的通信。一个 socket 包含地址、类型和通信协议等信息, 通过 socket() 函数创建: 

```c
int socket(int domain, int type, int protocol);
```

返回的就是这个 socket 对应的文件描述符 fd。操作系统将 socket 映射到进程的一个文件描述符上, 进程就可以通过读写这个文件描述符来和远程主机通信。

socket 与 fd 是一一对应的。通过 socket 通信, 实际上就是通过文件描述符 fd 读写文件。这也符合 Unix “一切皆文件”的哲学。
