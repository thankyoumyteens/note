# 并发标记

并发标记是 JVM 中的一种垃圾回收技术。它的主要目的是在垃圾回收的过程中减少对应用程序性能的影响。并发标记允许垃圾回收线程与应用程序线程同时运行, 从而使得应用程序在垃圾回收过程中无需完全暂停, 提高了应用程序的响应速度和用户体验。

在并发标记过程中, 垃圾回收器会首先进行初始标记, 这个阶段仅标记根集合直接引用的对象, 这一过程速度很快, 对应用程序的影响很小。

接下来是并发标记阶段, 在这个阶段, 垃圾回收器会跟踪并标记所有从根节点开始可达的对象。这个阶段是并发进行的, 即应用程序线程和垃圾回收线程同时运行, 因此应用程序的执行不会受到垃圾回收过程的影响。

并发标记的一个重要问题是漏标, 即由于应用程序在垃圾回收过程中继续运行, 可能会改变对象之间的引用关系, 导致垃圾回收器漏掉一些应该被标记的对象。为了解决这个问题, 并发标记之后通常会有一个重新标记的阶段, 以修正并发标记期间由于应用程序运行而产生变动的那部分对象的标记。

这种并发标记的技术在 G1 和 CMS 等垃圾回收器中均得到了应用。虽然它们采用的并发标记算法不尽相同, 但目标都是减少应用程序的停顿时间, 提高垃圾回收的效率。
