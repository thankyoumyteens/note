# 解析

在类加载过程中的解析阶段, JVM 会将字节码文件里"编译期可知, 运行期不可变"的方法的符号引用转化为直接引用。这类方法的调用被称为解析。

符合"编译期可知, 运行期不可变"要求的方法, 主要有静态方法和私有方法两大类。前者与类型直接关联, 后者在外部不可被访问, 它们都不可能被重写, 因此它们都适合在类加载阶段进行解析。

## JVM 调用方法的指令

- invokestatic: 用于调用静态方法
- invokespecial: 用于调用实例构造器`<init>()`方法、私有方法和父类中的方法
- invokevirtual: 用于调用所有的虚方法
- invokeinterface: 用于调用接口方法, 会在运行时确定一个实现该接口的对象
- invokedynamic: 先动态解析出要调用的方法, 然后再执行该方法

## 虚方法

符合"编译期可知, 运行期不可变"要求的方法有: 

1. 静态方法
2. 私有方法
3. 构造方法
4. 父类方法(通过 super 关键字调用父类的实例方法或构造器)
5. 被 final 修饰的方法

其中被 final 修饰的方法比较特殊, 由于历史原因, 它使用 invokevirtual 指令调用。其他 4 种方法都是使用 invokestatic 或 invokespecial 指令调用的。

这 5 种方法调用在类加载的时候就可以把符号引用解析为直接引用。这些方法统称为非虚方法(Non-Virtual Method)。其他方法就被称为虚方法(Virtual Method)。

