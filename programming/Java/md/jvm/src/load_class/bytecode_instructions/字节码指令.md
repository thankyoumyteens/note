# 字节码指令

Java虚拟机的指令由一个字节的代表着某种特定操作含义的数字(称为操作码，Opcode)以及跟随其后的零至多个代表此操作所需的参数(称为操作数，Operand)构成。

由于限制了Java虚拟机操作码的长度为一个字节，这意味着指令集的操作码总数不能够超过256条。

不考虑异常处理时，Java虚拟机的解释器的执行流程为：

```
do {
    自动计算PC寄存器的值加1;
    根据PC寄存器指示的位置，从字节码流中取出操作码;
    if (字节码存在操作数) {
        从字节码流中取出操作数;
    }
    执行操作码所定义的操作;
} while (字节码流长度 > 0);
```

在Java虚拟机的指令集中，大多数指令都包含其操作所对应的数据类型信息。如iload指令用于从局部变量表中加载int型的数据到操作数栈中，而fload指令加载的则是float类型的数据。这两条指令在虚拟机内部可能是由同一段代码来实现的，但在Class文件中它们拥有各自独立的操作码。

对于大部分与数据类型相关的字节码指令，它们的操作码助记符中都有特殊的字符来表明专门为哪种数据类型服务：i代表对int类型的数据操作，l代表long，s代表short，b代表byte，c代表char，f代表float，d代表double，a代表reference。

编译器会在编译期或运行期将byte和short类型的数据带符号扩展为相应的int类型数据，将boolean和char类型数据零位扩展为相应的int类型数据。在处理boolean、byte、short和char类型的数组时，也会转换为使用对应的int类型的字节码指令来处理。因此，大多数对于boolean、byte、short和char类型数据的操作，实际上都是使用相应的对int类型作为运算类型来进行的。
