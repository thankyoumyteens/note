# 初始化

初始化(Initialization)阶段是类加载过程的最后一个步骤。之前的几个类加载的阶段，除了在加载阶段用户可以通过自定义类加载器的方式局部参与外，其余动作都完全由Java虚拟机控制。直到初始化阶段，Java虚拟机才真正开始执行类中编写的Java程序代码，将主导权移交给应用程序。

初始化阶段就是执行类构造器`<clinit>()`方法的过程。`<clinit>()`是编译器自动生成的。`<clinit>()`方法是由编译器自动收集类中的所有类变量的赋值动作和静态语句块中的语句合并产生的，编译器收集的顺序是由语句在源代码中出现的顺序决定的，静态语句块中只能访问到定义在静态语句块之前的变量，定义在它之后的变量，在前面的静态语句块可以赋值，但是不能访问。

Java虚拟机会保证在子类的`<clinit>()`方法执行前，父类的`<clinit>()`方法已经执行完毕。中第一个执行的`<clinit>()`方法的类是Object类。

如果一个类中没有静态语句块，也没有对变量的赋值操作，那么编译器可以不为这个类生成`<clinit>()`方法。

接口中不能使用静态语句块，但仍然可以给变量赋初始值，因此接口也会生成`<clinit>()`方法。但执行接口的`<clinit>()`方法前不需要先执行父接口的`<clinit>()`方法，因为只有当父接口中定义的变量被使用时，父接口才会被初始化。此外，接口的实现类在初始化时也不会执行接口的`<clinit>()`方法。

多个线程同时去初始化一个类时，只会有其中一个线程去执行这个类的`<clinit>()`方法，其他线程都需要阻塞等待，直到活动线程执行完毕`<clinit>()`方法。
