# é¢„åŠ è½½è„šæœ¬

åœ¨é¡µé¢åŠ è½½ä¹‹å‰åŠ è½½ä¸€ä¸ªæœ¬åœ°è„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬èƒ½è°ƒç”¨æ‰€æœ‰Node APIã€‚ä» Electron 20 å¼€å§‹ï¼Œé¢„åŠ è½½è„šæœ¬é»˜è®¤æ²™ç›’åŒ–ï¼Œä¸å†æ‹¥æœ‰å®Œæ•´ Node.js ç¯å¢ƒçš„è®¿é—®æƒã€‚

# æ–°å»ºé¢„åŠ è½½è„šæœ¬

æ–°å»ºä¸€ä¸ª preload.js æ–‡ä»¶ï¼Œè¯¥è„šæœ¬é€šè¿‡ versions è¿™ä¸€å…¨å±€å˜é‡ï¼Œå°† Electron çš„ process.versions å¯¹è±¡æš´éœ²ç»™æ¸²æŸ“å™¨

```js
const { contextBridge } = require('electron')

contextBridge.exposeInMainWorld('versions', {
  // å°†åº”ç”¨ä¸­çš„ Chromeã€Nodeã€Electron ç‰ˆæœ¬å·æš´éœ²è‡³æ¸²æŸ“å™¨
  node: () => process.versions.node,
  chrome: () => process.versions.chrome,
  electron: () => process.versions.electron,
  // èƒ½æš´éœ²çš„ä¸ä»…ä»…æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²å˜é‡
})
```

# ä¿®æ”¹main.js

```js
const { app, BrowserWindow } = require('electron')
const path = require('path')

const createWindow = () => {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
    webPreferences: {
      // åŠ è½½preload.js
      preload: path.join(__dirname, 'preload.js'),
    },
  })

  win.loadFile('index.html')
}

app.whenReady().then(() => {
  createWindow()
})
```

# è®¿é—®é¢„åŠ è½½è„šæœ¬æš´éœ²çš„å˜é‡

æ–°å»ºä¸€ä¸ª renderer.js è„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬ä½¿ç”¨ document.getElementById DOM æ¥å£æ¥æ›¿æ¢ id å±æ€§ä¸º info çš„ HTML å…ƒç´ æ˜¾ç¤ºæ–‡æœ¬

```js
const information = document.getElementById('info')
// è¿™ä¸ªå˜é‡ä¸ä»…å¯ä»¥é€šè¿‡ window.versions è®¿é—®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ versions æ¥è®¿é—®
information.innerText = `æœ¬åº”ç”¨æ­£åœ¨ä½¿ç”¨ Chrome (v${versions.chrome()}), Node.js (v${versions.node()}), å’Œ Electron (v${versions.electron()})`
```

# ä¿®æ”¹index.html

åŠ ä¸Šä¸€ä¸ª id å±æ€§ä¸º info çš„å…¨æ–°å…ƒç´ ï¼Œå¹¶ä¸”åŠ è½½ renderer.js è„šæœ¬

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <title>æ¥è‡ª Electron æ¸²æŸ“å™¨çš„é—®å¥½ï¼</title>
  </head>
  <body>
    <h1>æ¥è‡ª Electron æ¸²æŸ“å™¨çš„é—®å¥½ï¼</h1>
    <p>ğŸ‘‹</p>
    <p id="info"></p>
  </body>
  <script src="./renderer.js"></script>
</html>
```
